# 开发指南

## ① 开工（1 次/天）
git pull origin master                  # 最新代码
git checkout -b feat/dept-list          # 新建功能分支（分支名：feat/xxx 或 fix/xxx）

## ② 写代码（无限循环
yarn dev                                # 热重载开发
## ... 写代码 ...

## ③ 提交（原子级，1~3 次/天） 
git add .                               # 只添加相关文件
git commit -m "feat: 部门列表页面 + 新增按钮"   # 规范格式见下
# 如果想改上一次 → git commit --amend

## ④ 合并（推送 + PR
git push origin feat/dept-list          # 首次推送会提示创建 upstream，照抄即可
# 去 Gitee → 创建 Pull Request → 源分支 feat/dept-list → 目标 master
# 自己点「合并」即可（单人项目可直推 master：git checkout master && git merge feat/dept-list）

## ⑤ 上线（CD） 
git checkout master
git pull origin master
yarn build
rsync -avz --delete dist/ 云服务器:/var/www/html/   # 示例同步命令

## yarn 与 vue
### 环境准备
1. 安装Node.js 和 yarn
    - 验证安装:
    ```bash
        node -v
        yarn -v
    ```
    - 若未安装yarn,可通过npm安装:
    `npm install -g yarn`
### 创建并启动Vue项目
#### 方式一 使用Vue CLI (传统方式, 适合复杂项目)
1. 安装Vue CLI
```bash
    npm install -g @vue/cli
```
2. 创建项目并制定yarn
```bash
vue create my-project --packageManager=yarn
```

3. 启动项目
```bash
    cd my-project
    yarn serve
```

#### 方式二 使用Vite (新工具, 启动速度快, 推荐新项目)
1. 通过 Yarn 创建 Vite 项目
```bash
yarn create vite my-project --template vue
```
2. 进入目录并安装依赖
```bash
cd my-project
yarn          # 安装依赖（等同于 yarn install）
```
3. 启动开发服务器
```bash
yarn dev      # 默认访问 http://localhost:517
```
#### 新旧版说明

| 对比项   |	Vue CLI	          | Vite                      |
| 适用场景 |	中大型复杂项目	    | 现代化轻量级项目（尤其 Vue 3）|
| 构建速度 |	较慢（基于 Webpack）| 极快（原生 ES 模块）        |
| 创建命令 |	vue create	      | yarn create vite          |
| 启动命令 |	yarn serve	      | yarn dev                  |
| 默认端口 |	8080	          | 5173                      |
| 配置文件 |	vue.config.js     |	vite.config.js            |

### 常见问题
1. 权限问题(Windows)
若提示脚本被禁止，在 PowerShell 中运行:
```bash
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```
输入Y确认

2. 端口冲突
修改配置文件：
- Vue ClI 在 `vue.config.js`中添加:
```JavaScript
module.exports = { devServer: { port: 3000 } }
```

- Vite 在 `vue.config.js`中添加:
```JavaScript
export default { server: { port: 3000 } }
```

3. 依赖安装失败
- 清除缓存: `yarn cache clean`
- 更换镜像: `yarn config set registry https://registry.npmmirror.com`

### 拓展建议
- 生产环境:
```bash
    yarn build # 生成dist/ 目录用于部署项目
```

- 添加依赖:
```bash
    yarn add 依赖
```
